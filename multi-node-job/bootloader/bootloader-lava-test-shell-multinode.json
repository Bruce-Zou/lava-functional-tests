{
    "timeout": 900,
    "job_name": "bootloader-lava-test-shell-multinode",
    "logging_level": "DEBUG",
    "device_group": [
        {
            "role": "black",
            "count": 2,
            "device_type": "beaglebone-black",
            "tags": [
                "codehelp-block"
            ]
        },
        {
            "role": "grey",
            "count": 2,
            "device_type": "beaglebone-black",
            "tags": [
                "codehelp-shadow"
            ]
        }
    ],
    "actions": [
        {
          "command": "deploy_linaro_kernel",
          "parameters": {
            "kernel": "http://community.validation.linaro.org/images/bbb/zImage",
            "ramdisk": "http://community.validation.linaro.org/images/bbb/uInitrd",
            "dtb": "http://community.validation.linaro.org/images/bbb/am335x-bone.dtb"
          }
        },
        {
          "command": "boot_linaro_image",
           "parameters": {
              "interactive_boot_cmds": true,
              "options": ["setenv autoload no",
                          "setenv pxefile_addr_r '0x50000000'",
                          "setenv kernel_addr_r '0x80200000'",
                          "setenv initrd_addr_r '0x81000000'",
                          "setenv fdt_addr_r '0x815f0000'",
                          "setenv initrd_high '0xffffffff'",
                          "setenv fdt_high '0xffffffff'",
                          "setenv loadkernel 'tftp ${kernel_addr_r} ${lava_kernel}'",
                          "setenv loadinitrd 'tftp ${initrd_addr_r} ${lava_ramdisk}; setenv initrd_size ${filesize}'",
                          "setenv loadfdt 'tftp ${fdt_addr_r} ${lava_dtb}'",
                          "setenv bootargs 'console=ttyO0,115200n8 root=/dev/ram0 ip=:::::eth0:dhcp'",
                          "setenv bootcmd 'dhcp; setenv serverip ${lava_server_ip}; run loadkernel; run loadinitrd; run loadfdt; bootz ${kernel_addr_r} ${initrd_addr_r} ${fdt_addr_r}'",
                          "boot"]
          }
        },
        {
            "command": "lava_test_shell",
            "parameters": {
                "testdef_repos": [
                    {
                        "git-repo": "git://git.linaro.org/qa/test-definitions.git",
                        "testdef": "openembedded/kernel-version.yaml"
                    }
                ],
                "timeout": 2400,
                "role": "black"
            }
        },
        {
            "command": "lava_test_shell",
            "parameters": {
                "testdef_repos": [
                    {
                        "git-repo": "git://git.linaro.org/qa/test-definitions.git",
                        "testdef": "openembedded/busybox.yaml"
                    }
                ],
                "timeout": 2400,
                "role": "grey"
            }
        },
        {
            "command": "submit_results_on_host",
            "parameters": {
                "stream": "BUNDLE_STREAM",
                "server": "LAVA_SERVER"
            }
        }
    ]
}
